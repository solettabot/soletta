<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Soletta: src/lib/io/sol-i2c-linux.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Soletta
   </div>
   <div id="projectbrief">Framework for making IoT devices</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7534c114e8c177158aaea42770a2745b.html">src</a></li><li class="navelem"><a class="el" href="dir_dfadc8aab91b9fe1fc8e84dacffb7f3a.html">lib</a></li><li class="navelem"><a class="el" href="dir_58486070464e7a56573702bdc864d2b8.html">io</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sol-i2c-linux.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;limits.h&gt;</code><br/>
<code>#include &lt;linux/i2c.h&gt;</code><br/>
<code>#include &lt;linux/i2c-dev.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;sys/ioctl.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="sol-log-internal_8h_source.html">sol-log-internal.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sol-i2c_8h_source.html">sol-i2c.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sol-macros_8h_source.html">sol-macros.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sol-util_8h_source.html">sol-util.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsol__i2c.html">sol_i2c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae2ab69103728d10d9ba2df3289ccb4c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#ae2ab69103728d10d9ba2df3289ccb4c0">SOL_LOG_DOMAIN</a>&#160;&#160;&#160;&amp;_log_domain</td></tr>
<tr class="separator:ae2ab69103728d10d9ba2df3289ccb4c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af66af59bd15ff59ee99f66e09ab646b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#af66af59bd15ff59ee99f66e09ab646b6">sol_i2c_close</a> (struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c)</td></tr>
<tr class="separator:af66af59bd15ff59ee99f66e09ab646b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1803571f9a7f1451d0ecae27d64fb48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#af1803571f9a7f1451d0ecae27d64fb48">sol_i2c_get_slave_address</a> (struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c)</td></tr>
<tr class="separator:af1803571f9a7f1451d0ecae27d64fb48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2052067ae6ebacf9cb9bc9c1f833291"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#ae2052067ae6ebacf9cb9bc9c1f833291">sol_i2c_open_raw</a> (uint8_t bus, enum <a class="el" href="sol-i2c_8h.html#a2a27a2238a08a352353426df1ff440d6">sol_i2c_speed</a> speed)</td></tr>
<tr class="separator:ae2052067ae6ebacf9cb9bc9c1f833291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8f6b7f4b4b9cfcc8593d01be7f253ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#aa8f6b7f4b4b9cfcc8593d01be7f253ae">sol_i2c_read</a> (const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c, uint8_t *values, size_t count)</td></tr>
<tr class="separator:aa8f6b7f4b4b9cfcc8593d01be7f253ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d1ef9ceaa9a5e611cb4f5e8589f64c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#a3d1ef9ceaa9a5e611cb4f5e8589f64c0">sol_i2c_read_register</a> (const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c, uint8_t <a class="el" href="structcommand.html">command</a>, uint8_t *values, size_t count)</td></tr>
<tr class="separator:a3d1ef9ceaa9a5e611cb4f5e8589f64c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75205a9687caa9c64c5aa4c09125288b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#a75205a9687caa9c64c5aa4c09125288b">sol_i2c_read_register_multiple</a> (const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c, uint8_t <a class="el" href="structcommand.html">command</a>, uint8_t *values, uint8_t len, uint8_t count)</td></tr>
<tr class="separator:a75205a9687caa9c64c5aa4c09125288b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a253472e7e56a1cce87b1a931c1e14f06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#a253472e7e56a1cce87b1a931c1e14f06">sol_i2c_set_slave_address</a> (struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c, uint8_t slave_address)</td></tr>
<tr class="separator:a253472e7e56a1cce87b1a931c1e14f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95052af45f3c0e6b954349bd5d4f637"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#ae95052af45f3c0e6b954349bd5d4f637">sol_i2c_write</a> (const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c, uint8_t *values, size_t count)</td></tr>
<tr class="separator:ae95052af45f3c0e6b954349bd5d4f637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d74e2bb30f5515865e2da5db276c405"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#a8d74e2bb30f5515865e2da5db276c405">sol_i2c_write_quick</a> (const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c, bool rw)</td></tr>
<tr class="separator:a8d74e2bb30f5515865e2da5db276c405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88962e58b502c0cb00e31b45f94570d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#a88962e58b502c0cb00e31b45f94570d4">sol_i2c_write_register</a> (const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *i2c, uint8_t <a class="el" href="structcommand.html">command</a>, const uint8_t *values, size_t count)</td></tr>
<tr class="separator:a88962e58b502c0cb00e31b45f94570d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d195c8c4ec454382e20249be7633887"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sol-i2c-linux_8c.html#a3d195c8c4ec454382e20249be7633887">SOL_LOG_INTERNAL_DECLARE_STATIC</a> (_log_domain,&quot;i2c&quot;)</td></tr>
<tr class="separator:a3d195c8c4ec454382e20249be7633887"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ae2ab69103728d10d9ba2df3289ccb4c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOL_LOG_DOMAIN&#160;&#160;&#160;&amp;_log_domain</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af66af59bd15ff59ee99f66e09ab646b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> void sol_i2c_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close an I2C bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle to close </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="structsol__i2c.html#aa16bb4f04e4d58206bd2cfffd9414e28">sol_i2c::dev</a>, and <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>.</p>

</div>
</div>
<a class="anchor" id="af1803571f9a7f1451d0ecae27d64fb48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> uint8_t sol_i2c_get_slave_address </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the (slave) device address set on an I2C bus (to deliver SMBus commands)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The slave device address set on <em>bus</em>. <code>0x0</code> means <em>bus</em> was not set to any device yet </dd></dl>

<p>References <a class="el" href="structsol__i2c.html#a6a982930e8c567ca8fd22b25efa16085">sol_i2c::addr</a>, and <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>.</p>

</div>
</div>
<a class="anchor" id="ae2052067ae6ebacf9cb9bc9c1f833291"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> struct <a class="el" href="structsol__i2c.html">sol_i2c</a>* sol_i2c_open_raw </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="sol-i2c_8h.html#a2a27a2238a08a352353426df1ff440d6">sol_i2c_speed</a>&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open an I2C bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The I2C bus number to open </td></tr>
    <tr><td class="paramname">speed</td><td>The speed to open I2C bus <em>bus</em> at </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new I2C bus handle</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This call won't attempt to make any pin muxing operations underneath. Use <a class="el" href="sol-i2c_8h.html#a43d88e4d8e1bafbcfdc36cbfe3928f5a">sol_i2c_open()</a> for that. </dd></dl>

<p>References <a class="el" href="structsol__i2c.html#a2f8294f4fb283a223524e0e529788d2a">sol_i2c::bus</a>, <a class="el" href="structsol__i2c.html#aa16bb4f04e4d58206bd2cfffd9414e28">sol_i2c::dev</a>, <a class="el" href="structsol__i2c.html#ae6dbdb022da3cb442b2247da4b2c69c9">sol_i2c::plain_i2c</a>, <a class="el" href="sol-log-internal_8h.html#a165cdb89cfc86be0c15766fdf5c9b833">SOL_LOG_INTERNAL_INIT_ONCE</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="aa8f6b7f4b4b9cfcc8593d01be7f253ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> ssize_t sol_i2c_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform successive SMBus byte read operations, with no specified register</p>
<p>This makes <em>count</em> read byte SMBus operations on the device <em>bus</em> is set to operate on, at no specific register. Some devices are so simple that this interface is enough. For others, it is a shorthand if you want to read the same register as in the previous SMBus command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
    <tr><td class="paramname">data</td><td>The output buffer for the read operation </td></tr>
    <tr><td class="paramname">count</td><td>The bytes count for the read operation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read, on success, or a negative value, on errors. </dd></dl>

<p>References <a class="el" href="group__Log.html#ga8b7a2ba17c9bf66ad98238f0ca591413">SOL_INT_CHECK</a>, and <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>.</p>

</div>
</div>
<a class="anchor" id="a3d1ef9ceaa9a5e611cb4f5e8589f64c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> ssize_t sol_i2c_read_register </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a SMBus (byte/word/block) read operation on a given device register</p>
<p>This reads a block of up to 32 bytes from a device, at the specified register <em>reg</em>. Depending on <em>count</em>, the underlying bus message might be SMBbus read byte (<em>count</em> is 1), SMBbus read word (<em>count</em> is 2) or SMBbus read block (<em>count</em> is greater than 2 and less than 33). If <em>count</em> is 33 or greater, this will issue a plain-I2C read/write transaction, with the first (write) message specifying the register to operate on and the second (read) message specifying the length and the destination of the read operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
    <tr><td class="paramname">reg</td><td>The I2C register for the read operation </td></tr>
    <tr><td class="paramname">data</td><td>The output buffer for the read operation </td></tr>
    <tr><td class="paramname">count</td><td>The bytes count for the read operation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>For the case of reading more the 32 of bytes from a register, this call is useful for auto-increment capable devices. If the device in question does not have that feature, one must issue <a class="el" href="sol-i2c_8h.html#ac8a35c3cf09d5f526a97789aedf88935">sol_i2c_read_register_multiple()</a> instead.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function will fail if <em>count</em> is bigger than 32 and the target I2C device does not accept plain-I2C messages</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read, on success, or a negative value, on errors. </dd></dl>

<p>References <a class="el" href="structsol__i2c.html#a6a982930e8c567ca8fd22b25efa16085">sol_i2c::addr</a>, <a class="el" href="structsol__i2c.html#a2f8294f4fb283a223524e0e529788d2a">sol_i2c::bus</a>, <a class="el" href="structsol__i2c.html#aa16bb4f04e4d58206bd2cfffd9414e28">sol_i2c::dev</a>, <a class="el" href="group__Log.html#ga8b7a2ba17c9bf66ad98238f0ca591413">SOL_INT_CHECK</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="sol-util_8h.html#ab584188ab3f38605dab8b04aaa85913d">sol_util_strerrora</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="a75205a9687caa9c64c5aa4c09125288b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool sol_i2c_read_register_multiple </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>times</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read an arbitrary number of bytes from a register in repeated bursts of a given length (that start always on the provided register address)</p>
<p>This is so because a lot of devices will, after a read operation, update its register values with new data to be read on subsequent operations, until the total data lenght the user requested is read. If the device has the auto-increment feature, <a class="el" href="sol-i2c_8h.html#ae82c0a0fe055eb5693b3149b4f2d8548">sol_i2c_read_register()</a> might be a better call than this function.</p>
<p>This will issue multiple plain-I2C read/write transaction with the first (write) message specifying the register to operate on and the second (read) message specifying the length (always <em>len</em> per read) and the destination of the read operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
    <tr><td class="paramname">reg</td><td>The register to start reading from </td></tr>
    <tr><td class="paramname">values</td><td>Where to store the read bytes </td></tr>
    <tr><td class="paramname">len</td><td>The size of a single read block </td></tr>
    <tr><td class="paramname">times</td><td>How many reads of size <em>len</em> to perform (on success, <em>len</em> * <em>times</em> bytes will be read)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function will fail if the target I2C device does not accept plain-I2C messages</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on succes, <code>false</code> otherwise </dd></dl>

<p>References <a class="el" href="structsol__i2c.html#a6a982930e8c567ca8fd22b25efa16085">sol_i2c::addr</a>, <a class="el" href="structsol__i2c.html#a2f8294f4fb283a223524e0e529788d2a">sol_i2c::bus</a>, <a class="el" href="structsol__i2c.html#aa16bb4f04e4d58206bd2cfffd9414e28">sol_i2c::dev</a>, <a class="el" href="structsol__i2c.html#ae6dbdb022da3cb442b2247da4b2c69c9">sol_i2c::plain_i2c</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="sol-util_8h.html#ab584188ab3f38605dab8b04aaa85913d">sol_util_strerrora</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="a253472e7e56a1cce87b1a931c1e14f06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool sol_i2c_set_slave_address </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slave_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a (slave) device address on a I2C bus to deliver SMBus commands to.</p>
<p>All other SMBus functions, after this call, will act on the given <em>slave_address</em> device address. Since other I2C calls might happen in between your own ones, though, it's highly advisable that you issue this call before using any of the SMBus read/write functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
    <tr><td class="paramname">slave_address</td><td>The slave device address to deliver commands to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise. </dd></dl>

<p>References <a class="el" href="structsol__i2c.html#a6a982930e8c567ca8fd22b25efa16085">sol_i2c::addr</a>, <a class="el" href="structsol__i2c.html#a2f8294f4fb283a223524e0e529788d2a">sol_i2c::bus</a>, <a class="el" href="structsol__i2c.html#aa16bb4f04e4d58206bd2cfffd9414e28">sol_i2c::dev</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="ae95052af45f3c0e6b954349bd5d4f637"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool sol_i2c_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform successive SMBus byte write operations, with no specified register</p>
<p>This makes <em>count</em> write byte SMBus operations on the device <em>bus</em> is set to operate on, at no specific register. Some devices are so simple that this interface is enough. For others, it is a shorthand if you want to write the same register as in the previous SMBus command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
    <tr><td class="paramname">data</td><td>The output buffer for the write operation </td></tr>
    <tr><td class="paramname">count</td><td>The bytes count for the write operation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes write, on success, or a negative value, on errors. </dd></dl>

<p>References <a class="el" href="group__Log.html#ga8b7a2ba17c9bf66ad98238f0ca591413">SOL_INT_CHECK</a>, and <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>.</p>

</div>
</div>
<a class="anchor" id="a8d74e2bb30f5515865e2da5db276c405"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool sol_i2c_write_quick </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>rw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a SMBus write quick operation</p>
<p>This sends a single bit to a device (command designed to turn on and off simple devices)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
    <tr><td class="paramname">rw</td><td>The value to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on succes, <code>false</code> otherwise </dd></dl>

<p>References <a class="el" href="structsol__i2c.html#a6a982930e8c567ca8fd22b25efa16085">sol_i2c::addr</a>, <a class="el" href="structsol__i2c.html#a2f8294f4fb283a223524e0e529788d2a">sol_i2c::bus</a>, <a class="el" href="structsol__i2c.html#aa16bb4f04e4d58206bd2cfffd9414e28">sol_i2c::dev</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="sol-util_8h.html#ab584188ab3f38605dab8b04aaa85913d">sol_util_strerrora</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="a88962e58b502c0cb00e31b45f94570d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Macros.html#ga374770937665ae002bf8d8d352c5cf99">SOL_API</a> bool sol_i2c_write_register </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__i2c.html">sol_i2c</a> *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a SMBus (byte/word/block) write operation on a given device register</p>
<p>This writes a block of up to 32 bytes from a device, at the specified register <em>reg</em>. Depending on <em>count</em>, the underlying SMBus call might be write byte (<em>count</em> is 1), write word (<em>count</em> is 2) or write block (<em>count</em> is greater than 2 and less than 33). If <em>count</em> is 33 or greater, this will issue a plain-I2C write transaction.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>bus The I2C bus handle </td></tr>
    <tr><td class="paramname">reg</td><td>The I2C register for the write operation </td></tr>
    <tr><td class="paramname">data</td><td>The output buffer for the write operation </td></tr>
    <tr><td class="paramname">count</td><td>The bytes count for the write operation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes write, on success, or a negative value, on errors. </dd></dl>

<p>References <a class="el" href="structsol__i2c.html#a6a982930e8c567ca8fd22b25efa16085">sol_i2c::addr</a>, <a class="el" href="structsol__i2c.html#a2f8294f4fb283a223524e0e529788d2a">sol_i2c::bus</a>, <a class="el" href="structsol__i2c.html#aa16bb4f04e4d58206bd2cfffd9414e28">sol_i2c::dev</a>, <a class="el" href="group__Log.html#ga8b7a2ba17c9bf66ad98238f0ca591413">SOL_INT_CHECK</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="sol-util_8h.html#ab584188ab3f38605dab8b04aaa85913d">sol_util_strerrora</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="a3d195c8c4ec454382e20249be7633887"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SOL_LOG_INTERNAL_DECLARE_STATIC </td>
          <td>(</td>
          <td class="paramtype">_log_domain&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;i2c&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
